#!/bin/bash

set -euf -o pipefail

ACTION="$1"
KEY="$2"
VALUE="${3-}"

jq --null-input \
	--arg action "$ACTION" \
	--arg key "$KEY" \
	--arg value "$VALUE" \
	'{"action": $action, "key": $key, "value": $value}' \
	>/tmp/datajarin

shortcuts run "Data Jar Helper" --input-path /tmp/datajarin --output-path /tmp/datajarout

rm /tmp/datajarin

if [ -f /tmp/datajarout ]; then
	cat /tmp/datajarout
	rm /tmp/datajarout
fi
